<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Statement - Mission Discovery | ScaleOps6</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Add data attribute for subcomponent detection -->
    <div data-subcomponent-id="1b" style="display:none;"></div>
    <style>
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            min-height: 100vh;
        }
        .header {
            background: linear-gradient(135deg, #FF5500 0%, #FF8800 100%);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo { font-size: 1.5rem; font-weight: bold; }
        .nav { display: flex; gap: 2rem; }
        .nav a { color: white; text-decoration: none; }
        .breadcrumb {
            padding: 1rem 2rem;
            color: #888;
            font-size: 0.9rem;
        }
        .breadcrumb a { color: #FF5500; text-decoration: none; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .subcomponent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(255,85,0,0.1) 0%, rgba(255,136,0,0.1) 100%);
            border-radius: 12px;
        }
        .subcomponent-badge {
            display: inline-block;
            background: #FF5500;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }
        .agent-info {
            color: #888;
            margin-top: 0.5rem;
        }
        .score-circle {
            position: relative;
            width: 120px;
            height: 120px;
        }
        .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .score-value {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: #FF5500;
        }
        .score-label {
            display: block;
            font-size: 0.75rem;
            color: #888;
        }
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #333;
        }
        .tab {
            background: none;
            border: none;
            color: #888;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .tab.active {
            color: #FF5500;
            border-bottom: 2px solid #FF5500;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        .content-section {
            background: #111;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .content-section h3 {
            color: #FF5500;
            margin-bottom: 1rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #ccc;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            background: #111;
            border: 1px solid #333;
            border-radius: 6px;
            color: white;
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .required {
            color: #FF5500;
        }
        .submit-btn {
            background: linear-gradient(135deg, #FF5500, #FF8800);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .analysis-grid {
            display: grid;
            gap: 2rem;
        }
        .analysis-card {
            background: #111;
            padding: 1.5rem;
            border-radius: 8px;
        }
        .dimension {
            margin-bottom: 1.5rem;
        }
        .dimension-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        .dimension-bar {
            height: 8px;
            background: #222;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        .dimension-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF5500, #FF8800);
        }
        .dimension-desc {
            font-size: 0.85rem;
            color: #888;
        }
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        .resource-card {
            background: #111;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }
        .resource-card i {
            font-size: 2rem;
            color: #FF5500;
            margin-bottom: 1rem;
        }
        .history-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 2rem;
        }
        .stat {
            text-align: center;
        }
        .stat-value {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: #FF5500;
        }
        .stat-label {
            display: block;
            font-size: 0.85rem;
            color: #888;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <img src="ScaleOps6_logo.png" alt="ScaleOps6" style="height: 40px;">
        </div>
        <nav class="nav">
            <a href="index.html">Dashboard</a>
            <a href="block-1-mission-discovery.html">Block 1</a>
            <a href="#">Settings</a>
        </nav>
    </div>

    <div class="breadcrumb">
        <a href="index.html">Dashboard</a> / 
        <a href="block-1-mission-discovery.html">Block 1: Mission Discovery</a> / 
        1B: Mission Statement
    </div>

    <div class="container">
        <div class="subcomponent-header">
            <div class="header-content">
                <span class="subcomponent-badge">1B</span>
                <h1>Mission Statement</h1>
                <p class="agent-info">
                    <i class="fas fa-robot"></i> Expert Agent: Mission Alignment Advisor
                </p>
            </div>
            <div class="score-display">
                <div class="score-circle">
                    <svg width="120" height="120">
                        <circle cx="60" cy="60" r="54" stroke="#333" stroke-width="8" fill="none"/>
                        <circle cx="60" cy="60" r="54" stroke="#FF5500" stroke-width="8" fill="none"
                                stroke-dasharray="339.292" stroke-dashoffset="100"
                                transform="rotate(-90 60 60)"/>
                    </svg>
                    <div class="score-text">
                        <span class="score-value">72</span>
                        <span class="score-label">Score</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="education">
                <i class="fas fa-graduation-cap"></i> Education
            </button>
            <button class="tab" data-tab="workspace">
                <i class="fas fa-edit"></i> Workspace
            </button>
            <button class="tab" data-tab="analysis">
                <i class="fas fa-chart-line"></i> Analysis
            </button>
            <button class="tab" data-tab="resources">
                <i class="fas fa-book"></i> Resources
            </button>
            <button class="tab" data-tab="history">
                <i class="fas fa-history"></i> Score History
            </button>
        </div>

        <div class="tab-content">
            <div id="education" class="tab-pane active">
                
            <div class="content-section">
                <h3>What is Mission Statement?</h3>
                <p>A concise declaration of the startup's purpose, framed in terms of who you serve, what outcome you're enabling, and what change you want to see in the world. It's the soul of your strategy.</p>
                
                <h3>Why It Matters</h3>
                <p>It unifies internal teams, attracts external believers, and anchors decision-making. Every product feature, hire, and campaign should align with this.</p>
                
                <h3>How to Implement</h3>
                
      <h4>Essential Elements:</h4>
      <ul>
        <li><strong>Target user group</strong> - Be specific about who you serve</li>
        <li><strong>Transformation or outcome</strong> - What change you enable</li>
        <li><strong>Emotional language</strong> - Make it inspiring and memorable</li>
        <li><strong>Brevity</strong> - Keep it under 20 words ideally</li>
        <li><strong>Long-term vision</strong> - Focus on enduring purpose, not tactics</li>
      </ul>
      
      <h4>Crafting Process:</h4>
      <ol>
        <li>Start with your problem statement</li>
        <li>Define the ideal end state for your customers</li>
        <li>Identify your unique approach or belief</li>
        <li>Test multiple versions with team and advisors</li>
        <li>Refine until it feels authentic and ambitious</li>
      </ol>
      
      <h4>Quality Checklist:</h4>
      <ul>
        <li>Would employees feel proud to share this?</li>
        <li>Does it differentiate from competitors?</li>
        <li>Can a customer understand it immediately?</li>
        <li>Does it guide difficult decisions?</li>
      </ul>
    
                
                
                <h3>Examples</h3>
                <ul>
                    <li>Empowering HR teams to create exceptional employee experiences through intelligent automation.</li><li>Making data-driven product decisions accessible to every product manager.</li><li>Democratizing financial planning for small business owners worldwide.</li>
                </ul>
                
                
                
                <h3>Key Metrics</h3>
                <ul>
                    <li>Team alignment score</li><li>Customer resonance rating</li><li>Decision-making clarity</li><li>Memorability index</li>
                </ul>
                
            </div>
        
            </div>
            </div>

            <div id="workspace" class="tab-pane">
                <!-- Dynamic worksheet will be injected here by worksheet-integration.js -->
                <div class="content-section">
                    <h3>üìù Interactive Worksheet</h3>
                    <p style="color: #888; margin: 1rem 0;">Loading dynamic worksheet...</p>
                </div>
            </div>
                
                    <div class="dimension-card">
                        <h4>Quality</h4>
                        <p>Quality and effectiveness of implementation</p>
                        <div class="score-display">
                            <span class="score-value">0</span>
                            <span class="score-label">/ 100</span>
                        </div>
                        <div class="weight-info">Weight: 20%</div>
                    </div>
                
                    <div class="dimension-card">
                        <h4>Strategic Alignment</h4>
                        <p>Alignment with business objectives</p>
                        <div class="score-display">
                            <span class="score-value">0</span>
                            <span class="score-label">/ 100</span>
                        </div>
                        <div class="weight-info">Weight: 20%</div>
                    </div>
                
                    <div class="dimension-card">
                        <h4>Adoption/Usage</h4>
                        <p>Level of adoption and regular usage</p>
                        <div class="score-display">
                            <span class="score-value">0</span>
                            <span class="score-label">/ 100</span>
                        </div>
                        <div class="weight-info">Weight: 20%</div>
                    </div>
                
                    <div class="dimension-card">
                        <h4>Business Impact</h4>
                        <p>Measurable impact on business outcomes</p>
                        <div class="score-display">
                            <span class="score-value">0</span>
                            <span class="score-label">/ 100</span>
                        </div>
                        <div class="weight-info">Weight: 20%</div>
                    </div>
                
            </div>
            <div class="overall-score">
                <h3>Overall Score</h3>
                <div class="score-circle">
                    <span class="score-number">0</span>
                    <span class="score-label">/ 100</span>
                </div>
            </div>
        
            </div>
                <p class="dimension-desc">How clear and compelling is the mission?</p>
            </div>
        
            <div class="dimension">
                <div class="dimension-header">
                    <span class="dimension-name">Team Alignment</span>
                    <span class="dimension-score">15/20</span>
                </div>
                <div class="dimension-bar">
                    <div class="dimension-fill" style="width: 66.13575780036298%"></div>
                </div>
                <p class="dimension-desc">Level of team buy-in and understanding</p>
            </div>
        
            <div class="dimension">
                <div class="dimension-header">
                    <span class="dimension-name">Market Resonance</span>
                    <span class="dimension-score">17/20</span>
                </div>
                <div class="dimension-bar">
                    <div class="dimension-fill" style="width: 84.0383552955273%"></div>
                </div>
                <p class="dimension-desc">How well does mission resonate with market</p>
            </div>
        
            <div class="dimension">
                <div class="dimension-header">
                    <span class="dimension-name">Measurability</span>
                    <span class="dimension-score">14/20</span>
                </div>
                <div class="dimension-bar">
                    <div class="dimension-fill" style="width: 60.47531437493158%"></div>
                </div>
                <p class="dimension-desc">Clarity of success metrics</p>
            </div>
        
            <div class="dimension">
                <div class="dimension-header">
                    <span class="dimension-name">Inspirational Value</span>
                    <span class="dimension-score">19/20</span>
                </div>
                <div class="dimension-bar">
                    <div class="dimension-fill" style="width: 72.51716318671222%"></div>
                </div>
                <p class="dimension-desc">Ability to inspire stakeholders</p>
            </div>
        
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Key Findings</h3>
                            
            <div class="findings">
                <h4 style="color: #4CAF50; margin-bottom: 1rem;">‚úÖ Strengths</h4>
                
                    <div class="finding positive" style="margin: 0.5rem 0;">
                        <i class="fas fa-check-circle"></i>
                        <span>Clear articulation of company purpose</span>
                    </div>
                
                    <div class="finding positive" style="margin: 0.5rem 0;">
                        <i class="fas fa-check-circle"></i>
                        <span>Strong emotional resonance with team</span>
                    </div>
                
                    <div class="finding positive" style="margin: 0.5rem 0;">
                        <i class="fas fa-check-circle"></i>
                        <span>Effective guidance for strategic decisions</span>
                    </div>
                
                
                <h4 style="color: #FF9800; margin: 1.5rem 0 1rem 0;">‚ö†Ô∏è Areas for Improvement</h4>
                
                    <div class="finding warning" style="margin: 0.5rem 0;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Mission statement could be more concise</span>
                    </div>
                
                    <div class="finding warning" style="margin: 0.5rem 0;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Limited external validation with customers</span>
                    </div>
                
                    <div class="finding warning" style="margin: 0.5rem 0;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Needs stronger connection to measurable outcomes</span>
                    </div>
                
                
                <h4 style="color: #2196F3; margin: 1.5rem 0 1rem 0;">üí° Opportunities</h4>
                
                    <div class="finding info" style="margin: 0.5rem 0;">
                        <i class="fas fa-lightbulb"></i>
                        <span>Use mission to guide product roadmap priorities</span>
                    </div>
                
                    <div class="finding info" style="margin: 0.5rem 0;">
                        <i class="fas fa-lightbulb"></i>
                        <span>Create mission-aligned hiring criteria</span>
                    </div>
                
                    <div class="finding info" style="margin: 0.5rem 0;">
                        <i class="fas fa-lightbulb"></i>
                        <span>Develop mission-based marketing campaigns</span>
                    </div>
                
            </div>
        
                        </div>
                    </div>
                </div>
            </div>

            <div id="analysis" class="tab-pane">
                <div id="analysis-content" class="analysis-placeholder">
                    <h3>No Analysis Results Yet</h3>
                    <p>Complete the worksheet in the Workspace tab and click "Save Progress" to generate an analysis.</p>
                </div>
            </div>

            <div id="resources" class="tab-pane">
                
            <div class="resources-grid">
                
                    <div class="resource-section">
                        <h3>Recommended Tools</h3>
                        <ul>
                            <li>Mission Statement Generators (Canva, Wordsmith)</li><li>Team Collaboration Tools (Miro, Figma)</li><li>Survey Tools for Validation (Google Forms, Typeform)</li><li>Brand Identity Platforms (Brandfolder, Frontify)</li>
                        </ul>
                    </div>
                
                    <div class="resource-section">
                        <h3>Templates & Frameworks</h3>
                        <ul>
                            <li>Mission Statement Builder</li><li>Vision-Mission-Values Framework</li><li>Strategic Narrative Template</li><li>Stakeholder Alignment Canvas</li>
                        </ul>
                    </div>
                
                    <div class="resource-section">
                        <h3>Best Practices</h3>
                        <ul>
                            <li>Involve entire founding team in creation process</li><li>Test with at least 10 potential customers</li><li>Keep it under 20 words for memorability</li><li>Ensure it guides actual decision-making</li>
                        </ul>
                    </div>
                
            </div>
        
            </div>
        
            </div>
        
                </div>
            </div>

            <div id="history" class="tab-pane">
                <div class="history-content">
                    <h2>Score History & Trends</h2>
                    <div class="chart-container">
                        <canvas id="scoreChart"></canvas>
                    </div>
                    <div class="history-stats">
                        <div class="stat">
                            <span class="stat-value">+15%</span>
                            <span class="stat-label">30-Day Change</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">72</span>
                            <span class="stat-label">Current Score</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">85</span>
                            <span class="stat-label">Target Score</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load Enhanced Display Handler for Mission Statement -->
    <script src="enhanced-display-handler.js"></script>
    <script src="unified-analysis-handler.js"></script>
    <script src="dynamic-worksheet-generator.js"></script>
    <script src="question-bank-system.js"></script>
    <script src="subcomponent-agent-factory.js"></script>
    <script src="adaptive-question-flow.js"></script>
    <script src="learning-system.js"></script>
    <script src="scoring-engine.js"></script>
    <script src="worksheet-integration.js"></script>
    
    <script>
        
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active pane - Use tab-pane class consistently
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('active');
                    pane.style.display = 'none';
                });
                const targetPane = document.getElementById(tabName);
                if (targetPane) {
                    targetPane.classList.add('active');
                    targetPane.style.display = 'block';
                    console.log(`‚úÖ Activated pane: ${tabName}`);
                } else {
                    console.error(`‚ùå Could not find pane with id: ${tabName}`);
                }
            });
        });

        // Use the unified analysis handler if available
        if (window.analyzeWorksheet) {
            console.log('‚úÖ Using unified analysis handler for Mission Statement');
        } else {
            // Fallback: Form submission with analysis
            document.getElementById('worksheetForm')?.addEventListener('submit', async (e) => {
                e.preventDefault();
                console.log('üìù Mission Statement form submitted - starting analysis');

                // Collect form data
                const formData = new FormData(e.target);
                const worksheetData = {};

                // Map form fields to expected worksheet keys
                const fieldMapping = {
                    'current_state': 'field-1',
                    'target_outcome': 'field-2',
                    'key_challenges': 'field-3',
                    'timeline': 'field-4',
                    'resources_needed': 'field-5',
                    'success_metrics': 'field-6'
                };

                for (let [key, value] of formData.entries()) {
                    const mappedKey = fieldMapping[key] || key;
                    worksheetData[mappedKey] = value;
                    console.log(`üìã Field ${key} -> ${mappedKey}: ${value.substring(0, 50)}...`);
                }

                console.log('üîç Sending analysis request to server...');
                console.log('üì¶ Worksheet data:', worksheetData);

                try {
                    // Call the analysis API
                    const response = await fetch('/api/analyze/mission-statement', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-user-id': '1'
                        },
                        body: JSON.stringify({
                            worksheetData: worksheetData,
                            subcomponentId: '1-2'
                        })
                    });

                    console.log(`üì° Response status: ${response.status}`);

                    if (!response.ok) {
                        throw new Error(`Analysis failed: ${response.statusText}`);
                    }

                    const analysis = await response.json();
                    console.log('‚úÖ Analysis received:', analysis);
                    console.log('üìä Score:', analysis.score);
                    console.log('üéØ Recommendations:', analysis.recommendations?.length || 0);
                    
                    // Log the recommendations structure for debugging
                    if (analysis.recommendations && analysis.recommendations.length > 0) {
                        console.log('üìã First recommendation structure:', analysis.recommendations[0]);
                    }

                    // Switch to analysis tab first
                    console.log('üîÑ Switching to Analysis tab...');
                    document.querySelector('[data-tab="analysis"]').click();

                    // Display the analysis results using the enhanced display function
                    // Make sure we're using the correct function and passing the right parameters
                    if (typeof window.displayEnhancedAnalysisResults === 'function') {
                        console.log('‚úÖ Using enhanced display handler for rich formatting');
                        window.displayEnhancedAnalysisResults(analysis, 'mission-statement');
                    } else if (typeof window.displayAnalysisResults === 'function') {
                        console.log('‚úÖ Using standard display handler');
                        window.displayAnalysisResults(analysis);
                    } else {
                        console.error('‚ùå No display function available');
                        // Fallback: Display basic results
                        const analysisContent = document.getElementById('analysis-content');
                        if (analysisContent) {
                            analysisContent.innerHTML = `
                                <div style="padding: 20px;">
                                    <h3>Analysis Results</h3>
                                    <p>Score: ${analysis.score}%</p>
                                    <p>Recommendations: ${analysis.recommendations?.length || 0}</p>
                                    <pre>${JSON.stringify(analysis, null, 2)}</pre>
                                </div>
                            `;
                        }
                    }

                } catch (error) {
                    console.error('‚ùå Analysis error:', error);
                    alert('Analysis failed: ' + error.message);
                }
            });
        }

        // Simulate score animation
        setTimeout(() => {
            const circle = document.querySelector('circle:last-child');
            if (circle) {
                circle.style.transition = 'stroke-dashoffset 1s ease';
                circle.style.strokeDashoffset = '95';
            }
        }, 500);
    </script>
</body>
</html>